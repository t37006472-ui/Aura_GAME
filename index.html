<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AURA</title>
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <style>
        body { margin: 0; background-color: #000; overflow: hidden; }
        canvas { display: block; margin: 0 auto; }
    </style>
</head>
<body>
<script>
// Cena de Título
class TitleScene extends Phaser.Scene {
    constructor() { super('TitleScene'); }
    create() {
        const { width, height } = this.scale;
        this.add.text(width/2, height/3, 'AURA', { fontSize: '60px', fill: '#00ffcc', fontStyle: 'bold' }).setOrigin(0.5);

        // Botão de início
        const btn = this.add.rectangle(width/2, height/1.8, 300, 80, 0x00ffcc, 0.2).setInteractive();
        this.add.text(width/2, height/1.8, 'CLIQUE PARA JOGAR', { fontSize: '20px', fill: '#fff' }).setOrigin(0.5);

        // Transição para a MainScene
        btn.on('pointerdown', () => this.scene.start('MainScene'));
        this.input.once('pointerdown', () => this.scene.start('MainScene'));
    }
}

// Cena Principal
class MainScene extends Phaser.Scene {
    constructor() { super('MainScene'); }
    create() {
        // 1. Chão
        this.platforms = this.physics.add.staticGroup();
        this.platforms.add(this.add.rectangle(400, 430, 800, 40, 0x333333));

        // 2. Player (Removido o erro de setParentContainer)
        // Criamos o sprite e o visual separadamente, mas o visual segue o sprite no update
        this.player = this.physics.add.sprite(100, 300, null);
        this.player.body.setSize(32, 48);
        this.player.setCollideWorldBounds(true);
        
        // Criamos o retângulo visual
        this.playerVisual = this.add.rectangle(0, 0, 32, 48, 0x00ff00);
        
        // Colisão
        this.physics.add.collider(this.player, this.platforms);

        // 3. Controles (Keyboard + Toque na tela para pular)
        this.cursors = this.input.keyboard.createCursorKeys();
        this.input.on('pointerdown', () => {
            if (this.player.body.touching.down) this.player.setVelocityY(-450);
        });

        this.add.text(10, 10, 'AURA - Use Setas ou Toque para Pular', { fill: '#0f0' });
    }

    update() {
        // Movimento Horizontal
        if (this.cursors.left.isDown) {
            this.player.setVelocityX(-200);
        } else if (this.cursors.right.isDown) {
            this.player.setVelocityX(200);
        } else {
            this.player.setVelocityX(0);
        }

        // Pulo Keyboard
        if (this.cursors.up.isDown && this.player.body.touching.down) {
            this.player.setVelocityY(-450);
        }

        // FAZER O VISUAL SEGUIR O CORPO FÍSICO
        this.playerVisual.x = this.player.x;
        this.playerVisual.y = this.player.y;
    }
}

// Configuração do Jogo
const config = {
    type: Phaser.AUTO,
    scale: {
        mode: Phaser.Scale.FIT,
        autoCenter: Phaser.Scale.CENTER_BOTH,
        width: 800,
        height: 450
    },
    physics: {
        default: 'arcade',
        arcade: { gravity: { y: 1000 }, debug: false }
    },
    scene: [TitleScene, MainScene]
};

const game = new Phaser.Game(config);
</script>
</body>
</html>
