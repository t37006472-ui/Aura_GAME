<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AURA</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.60.0/phaser.min.js"></script>
    <style>
        body { margin: 0; background-color: #000; overflow: hidden; }
        canvas { display: block; margin: 0 auto; }
    </style>
</head>
<body>
<script>
class TitleScene extends Phaser.Scene {
    constructor() { super('TitleScene'); }
    create() {
        const { width, height } = this.scale;
        
        this.add.text(width/2, height/3, 'AURA', { 
            fontSize: '80px', fill: '#00ffcc', fontStyle: 'bold' 
        }).setOrigin(0.5);

        // Criar um botão VISÍVEL para teste (Botão Azul)
        const btnBox = this.add.rectangle(width/2, height/1.8, 400, 100, 0x0000ff, 0.5)
            .setInteractive({ useHandCursor: true });

        const startText = this.add.text(width/2, height/1.8, 'TOQUE AQUI PARA JOGAR', { 
            fontSize: '32px', fill: '#fff'
        }).setOrigin(0.5);

        // Tentar iniciar com qualquer tipo de clique
        btnBox.on('pointerdown', () => this.doStart());
        this.input.on('pointerdown', () => this.doStart());
    }

    doStart() {
        console.log("Tentando mudar de cena...");
        this.scene.start('MainScene', { hp: 5, abilities: { doubleJump: true } });
    }
}

class MainScene extends Phaser.Scene {
    constructor() { super('MainScene'); }
    create() {
        this.add.text(400, 225, 'JOGO INICIADO!', { fontSize: '40px' }).setOrigin(0.5);
        // Plataforma simples para teste
        this.physics.add.staticGroup().add(this.add.rectangle(400, 400, 800, 40, 0x333333));
        this.player = this.physics.add.sprite(400, 300, null);
        this.add.rectangle(0, 0, 32, 48, 0x00ff00).setParentContainer(this.player);
        this.player.setCollideWorldBounds(true);
        this.physics.add.collider(this.player, this.physics.world.staticBodies);
    }
}

const config = {
    type: Phaser.AUTO,
    scale: { mode: Phaser.Scale.FIT, autoCenter: Phaser.Scale.CENTER_BOTH, width: 800, height: 450 },
    physics: { default: 'arcade', arcade: { gravity: { y: 1000 } } },
    scene: [TitleScene, MainScene]
};

// Iniciar o jogo apenas quando a janela carregar totalmente
window.onload = () => { new Phaser.Game(config); };
</script>
</body>
</html>
